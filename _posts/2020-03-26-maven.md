---
layout: post
title: 메이븐 기초
tags: [maven]
---
## Maven Basic

프로젝트 빌드 도구. 이클립스와 같은 IDE와 다른 빌드 도구이다.

각 Phase를 갖는다.

Phase는 Phase:plugin:goal을 갖는다.

상위의 Phase를 실행하면 하위의 Phase는 자동으로 실행된다.





출처 : https://youtu.be/VAp0n9DmeEA


--------

빌드툴과 IDE의 차이.
빌드를 도와주는 역할자 - 편집의 기능은 없음.

이클립스에서 프로젝트를 생성하는 것보다
메이븐으로 생성하는 것이 생산성 측면에서 더 나음.


maven.apache.org에서 bin 파일을 받음.
환경변수로 설정하여 cmd에서 사용할 있도록 함.
M2_HOME="압축을 푼 ROOT 경로"
path에 변수를 등록 => %M2_HOME%\bin


메이븐 프로젝트 생성 명령어.
mvn archetype:generate -DgroupId=com.newlecture -Dartifactid=javaprj -DarchetypeArtifactId=maven-archetype-quickstart


interactive mode로 각 프로젝트의 기본정보를 입력

maven Project는 항상 pom.xml이 있는 곳이 root가 된다.

mvn compile - C:\DEV_STUDY\maven\javaprj\target\classes 하위에 컴파일된 class 파일들이 생성된다.

mvn package - .jar 파일을 생성

jar 파일의 실행
java -cp target\javaprj-1.0-SNAPSHOT.jar com.newlecture.App

-cp는 classPath를 등록하는 명령어.



build Lifecycle
만약에 compile을 실행하게 되면 이전에 플러그인이 존재하는 각 phase들을 모두 실행하게 된다.


pom = Project Object Model  

mvn help:describe -Dcmd=compile

메이븐이 가지고 있는 명령어들은 결국 각 단계를 의미한다.

각 phase들을 구성하는 프로그램들은 플러그인이라는 이름으로 구성된다.

그안에는 골(Goal)이라는 것이 있다.


###### 6강 메이븐 프로젝트를 이클립스에 임포트하기.

기존의 프로젝트를 Import 함

pom 파일이 있는 폴더가 root가 된다.

이클립스와 연결된 것이 아니라 메이븐과 연결되어 구성된 프로젝트이기 떄문에 어디서든지 Import가 가능하다.

###### 7강 - 컴파일 플러그인으로 JDK 버전 변경하기

pom.xml 파일에서 플러그인의 버전이나 기타 정보들을 수정할 수 있다.

````
<build>
  <plugins>
    <plugin>
      <artifactId>maven-compiler-plugin</artifactId>
      <version>3.8.1</version>
      <configuration>
        <source>1.8</source>
        <target>1.8</target>
      </configuration>
    </plugin>		
  </plugins>
</build>
````

단순히 JDK 버전만을 수정하는 것은 Properties에서도 가능하다.
````
<properties>
  <maven.compiler.source>1.8</maven.compiler.source>
  <maven.compiler.target>1.8</maven.compiler.target>
</properties>
````



###### 8강 - 웹 프로젝트로 변경하기
jar to war

pom.xml에서 package를 war로 변경한다.

그러면 web.xml 존재하지 않는 다는 에러가 발생한다.

````
web.xml is missing and failonmissingwebxml is set to true
````

아래 디렉토리에 tomcat의 web.xml 추가한다.

```
\apache-tomcat-9.0.33-windows-x64\apache-tomcat-9.0.33\webapps\ROOT\WEB-INF\web.xml
/javaprj/src/main/webapp/WEB-INF/web.xml
```

그후 welcome page를 추가한다.
```
/javaprj/src/main/webapp/index.html
```

tomcat을 실행하고 브라우저로 접속해서 확인한다.



###### 9강 - 서블릿/JSP 라이브러리 설정하기

webapp/index.jsp 를 추가한다.

jsp에서 http/httpservlet이 존재하지 않는 다는 에러가 발생하게 된다.
````
The superclass "javax.servlet.http.HttpServlet" was not found on the Java Build Path
````


방법  1. build path에 현재 프로젝트에서 사용중인 tomcat의 라이브러리를 추가한다.

그러나 이렇게 라이브러리를 추가하게 되면 개발환경이 변경될 때 마다 라이브러리를 새로 추가해줘야한다.

maven Lib 저장소 이미지


방법 2.pom.xml에다가 dependency를 추가한다.

버전 선택방법은 현재 사용중인 tomcat이 reference 하는 jsp의 버전을 추가한다.
```
<!-- https://mvnrepository.com/artifact/org.apache.tomcat/tomcat-jsp-api -->
<dependency>
    <groupId>org.apache.tomcat</groupId>
    <artifactId>tomcat-jsp-api</artifactId>
    <version>9.0.33</version>
</dependency>
```
